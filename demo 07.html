<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- react 必须引入的文件 -->
    <script src="build/react.js" charset="utf-8"></script>
    <script src="build/react-dom.js" charset="utf-8"></script>
    <script src="build/browser.min.js" charset="utf-8"></script>
</head>

<body>
    <div id="example"></div>
</body>

<script type="text/babel">
  //这里写jsx代码 javascript xml
  /**
   *   1、Mounting/组件挂载相关
   *     a、componentWillMount
   *         组件将要挂载。在render之前执行，但仅执行一次，即便是重复多次渲染该
   *         组件，或者改变组件的state
   *     b、componentDidMount
   *         组件已经挂载，在render之后执行，同一个组件重复渲染只执行一次
   *    2、Updating/组件更新相关
   *      a、componentWillReceiveProps(object nextProps)
   *          已经加载组件收到新的props之前调用，注意：组件初始化渲染时不会执行
   *      b、shouldComponentUpdate(object nextProps,object nextState)
   *          组件判断是否重新渲染时调用，该接口实际是在组件接收到了新的props 或者
   *          新的state的时候会立即调用，然后通过
   *      c、componentWillUpdate(object nextProps,object nextState)
   *          组件将要更新
   *      d、componentDidUpdate(object nexProps,object prevState)
   *          组件已经更新
   *     3、Unmounting/组件移除相关
   *       a、componentWillUnmount
   *       在组件将要被移除之前的时间点出发，可以利用该方法来执行一些必要的清理，组件将要移除
   *     4、生命周期中与props和state相关
   *       a、getDefaultProps 设置props属性默认值
   *       b、getInitialState 设置state属性初始值
   */

    var Demo = React.createClass({
      /**
       * 1创建阶段，
       *   流程：
       *     只调用getDefaultProps方法
       */
      getDefaultProps: function() {
        console.log('getDefaultProps');
        return {};
      },
      /**
       * 2实例化阶段，
       *   流程：
       *     getInitialState
       *     componentWillMount
       *     render
       *     comonentDiMount
       */
      getInitialState: function() {
        //设置this.state的默认值
        console.log('getInitialState');
        return null;
      },
      componentWillMount: function() {
        //render之前调用
        console.log('componentWillMount');
      },
      render: function() {
        //渲染并返回一个虚拟DOM
        console.log('render');
        return <div>hello React</div>
      },
      componentDidMount: function() {
        //在render之后调用
        //在该方法中React会使用render方法返回的虚拟DOM对象创建真是的DOM结构
        //可以在这个方法中读取到DOM节点
        console.log('componentDidMount');
      },
      /**
       *   3更新阶段
       *     流程：
       *       componentWillReceiveProps
       *       shouldComponentUpdate  如果返回值是false,后三个方法不执行
       *       componentWillUpdate
       *       render
       *       componentDidUpdate
       */
       componentWillReceiveProps: function() {
         console.log('componentWillReceiveProps');
       },
       shouldComponentUpdate: function() {
         //是否需要更新
         console.log('shouldComponentUpdate');
         return false;  //返回false，后面不执行
       },
       componentWillUpdate: function() {
         console.log('componentWillUpdate');
       },
       componentDidUpdate: function() {
         console.log('componentDidUpdate');
       },
       /**
        * 4、销毁阶段
        *     流程：
        *       componentWillUnmount
        */
       componentWillUnmount: function() {
         console.log('componentWillUnmount');
       }
    });

    //第一次创建并加载组件
    ReactDOM.render(
      <Demo />,
      document.getElementById('example')
    );
    //第二次加载组件，更新组件
    ReactDOM.render(
      <Demo />,
      document.getElementById('example')
    );
</script>
</html>
